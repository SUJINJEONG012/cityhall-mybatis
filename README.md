# 스프링 MVC 쇼핑몰 
![screencapture-localhost-8080-2023-06-11-02_46_05](https://github.com/SUJINJEONG012/spring-mybatis-shopping-v1/assets/56811978/944a742a-b2ca-4d99-879e-f8c998e183ff)


##  🔗 프로젝트 환경설정

- STS3, JAVA11
- MySQL
- Jquery
- JSP
- Apache Tomcat 8.5
- MyBatis

## 📁 초기세팅

1. **스프링/자바 버전 변경**
2. **테스트/로그 라이브러리 추가, Junit 라이브러리 버전 변경**
3. ****JDBC 라이브러리 추가 및 JDBC 연결 테스트****
4. ****커넥션 풀 & DataSource 설정****
5. ****My Batis 라이브러리 추가, SQLSessionFactory 설정****
6. ****Log4jdbc-log4j2 추가 및 설정.****

## 📄 패키지 설정

- Controller
- Model : VO( Value Object ) 데이터 타입 저장
- Mapper : DAO( Data Access Object) 역할, 데이터베이스 접속하는 역할
- Service :   mapper와 Controller 사이를 연결, 비즈니스 로직

## ✏️ 마이바티스 설정

- mapper로 사용할 xml 경로 지정
- mapper패키지가 스프링에서 인식할수 있도록 root-context.xml파일 생성
- Servlet 버전 변경 : 자바설정 등 이용하기 위해서 Servlet 3.0 이상 버전을 사용
- pom.xml 에서 기존 servlet 2.5 버전을 주석 처리 혹은 삭제 후 3.1.0 버전을 추가

## ✔️ DBMS

![SpringERD](https://github.com/SUJINJEONG012/spring-mybatis-shopping-v1/assets/56811978/43c25e72-88cd-4713-8828-486e53619628)




---

## 😀주요 기능

####  회원가입
아이디 (중복확인)
- 비밀번호 / 비밀번호 확인(비교일치확인)
- 이름
- 이메일 (이메일인증번호 클릭시 > 콘솔창으로 인증번호)
- 주소 오픈API 설정
- 가입완료시 메인페이지로 이동아이디 (중복확인)
- 비밀번호 / 비밀번호 확인(비교일치확인)
- 이름
- 이메일 (이메일인증번호 클릭시 > 콘솔창으로 인증번호)
- 주소 오픈API 설정
- 가입완료시 메인페이지로 이동

####  로그인
- 아이디, 비밀번호입력
- 아이디를 잘못입력시 "사용자 ID 또는 비밀번호를 잘못 입력하셨습니다." 라는 오류 메세지 출력
- 로그인인시 메인페이지로 이동

####  로그아웃
- 로그아웃시 메인페이지로 이동

####  검색

- 상품검색 데이터는 책제목&작가로만 검색이 가능하다
- 조회 할 데이터 키워드로 검색한다.

####  리뷰등록
상품이미지, 카테고리, 제목, 작가,출판사,출판일, 정가, 판매가, 할인,적립포인트, 책소개, 책목차 출력
- 주문수량 클릭시 금액 변경되는거 (상세에서 변경되도록 추가해야함)
- 장바구니, 바로구매 버튼 이동시 각 페이지별로 이동
- 상세내용 아래에 로그인 시 "리뷰쓰기" 버튼 출력 / 비로그인시 보이지않음
- 리뷰버튼은 내가쓴글 리뷰가 있을경우 "수정", "삭제" 버튼이 보임

####  리뷰 수정& 삭제
- 작성한사람만이 수정& 삭제 가능

####  상품 상세페이지 
- 상품이미지, 카테고리, 제목, 작가,출판사,출판일, 정가, 판매가, 할인,적립포인트, 책소개, 책목차 출력
- 주문수량 클릭시 금액 변경되는거 (상세에서 변경되도록 추가해야함)
- 장바구니, 바로구매 버튼 이동시 각 페이지별로 이동
- 상세내용 아래에 로그인 시 "리뷰쓰기" 버튼 출력 / 비로그인시 보이지않음
- 리뷰버튼은 내가쓴글 리뷰가 있을경우 "수정", "삭제" 버튼이 보임

####  장바구니 담기
- "장바구니 담기" 클릭시 로그인 안했을경우 > 로그인하라는 메세지 전달후 로그창으로 이동
- "장바구니 담기" 로그인 햇을경우 - > 담겼다는 메시지와 함께 장바구니 페이지로 이동

####  바로구매, 주문하기
- 주문자정보 : 사용자정보주소록(주문자,이름,메일,배송지), 직접입력(주소지)
- 주문상품 정보 : 이미지, 상품정보, 판매가
- 포인트 사용 : 포인트 금액노출 모두사용/사용취소
- 최종결제금액 : 상품금액, 배송비(3만원이상이면 무료배송) 할인금액(포인트에서차감), 최종결제금액, 적립예정포인트
- 
####  상품등록
- 책제목, 작가(작가선택 팝업창으로), 출판일(라이브러리날짜api연동), 출판사,
- 책카테고리(더미로등록한), 상품가격, 상품재고, 상품할인율, 책소개(에디터api), 책목차(에디터api), 상품이미지(파일선택)
####  상품관리
- 상품번호, 상품이름, 작가이름, 카테고리,재고, 등록날짜출력
- 검색키워드 => 상품이름으로 검색
- 페이징처리
####  상품수정
- 상품상세 > 수정 클릭시 등록날짜 제외 수정 가능
- 취소, 수정, 삭제버튼
####  상품삭제
- 상품삭제
####  작가등록
- 작가이름, 소속구가, 작가소개등록

####  작가관리
- 작가이름, 소속구가, 작가소개등록

####  작가수정
- 작가 수정 

####  작가삭제
- 상품중에 해당 작가 데이터를 사용하고 있는 데이터가 있으면 삭제할 수없다-> 삭제불가능
- 상품 삭제 후 작가 삭제가능 


---

### 장바구니 설계

장바구니 상품은 회원한명에 속해 
회원은 여러개의 장바구니 상품을 가질 수 있다.
장바구니 상품이 N 장바구니 상품 테이블에 외래키 memberId 를 두 었다.
회원, 카트, 상품
장바구니 상품 N ,  장바구니 상품 테이블에 memberId 를 두었다.
장바구니 상품 N ,  장바구니 상품 테이블에 bookId 를 두었다.
cart 테이블에 memberId, bookId 를 외래키로 설정

### 주문구현 데이터베이스 설계

관계 설계 
회원과 주문의 관계를 생각하면, 한명의 회원은 여려번의 주문을 할 수 있다.
하지만 주문의 경우 반드시 한명의 회원에 속해야 한다.
회원과 주문은 일대다(1:N) 관계
회원과 상품에 대해 생각해보겠습니다. (영수증을 생각해보면 이해하기 쉬움. )
하나의 주문에는 여러개의 상품을 가질 수 있다.
그리고 하나의 상품은 여러 주문에 속할 수 있다. 따라서 ‘주문’과 ‘상품’은 다대다(N:N)관계

이관계를 근거로 테이블 설계는 다대다 관계가 존재할 수 없다. 
주문, 상품의 다대다관계에 주문상품을 중간에 넣어서
회원 과 주문  1: N  (회원은 한명이 여러개의 주문을 할 수 있다.)
주문  1 : N 주문상품  1 : N 상품  
하나의 주문에는 여러개의 상품이들어갈수있고,
하나의 상품이 여러 주문에 속할 수 있습니다. 중간에 주문한 테이블을 찾을 수 있는 관계 설계




